{"version":3,"file":"zynga-scroller.js","sources":["../../src/vendor/zynga-scroller.js"],"sourcesContent":["/*\n * Scroller\n * http://github.com/zynga/scroller\n *\n * Copyright 2011, Zynga Inc.\n * Licensed under the MIT License.\n * https://raw.github.com/zynga/scroller/master/MIT-LICENSE.txt\n *\n * Based on the work of: Unify Project (unify-project.org)\n * http://unify-project.org\n * Copyright 2011, Deutsche Telekom AG\n * License: MIT + Apache (V2)\n */\n\n// --- Animate ---\n\nconst time = Date.now || function() {\n  return +new Date();\n};\nconst desiredFrames = 60;\nconst millisecondsPerSecond = 1000;\nlet running = {};\nlet counter = 1;\n\nconst Animate = {\n  requestAnimationFrame: (function() {\n    var requestFrame = typeof window !== 'undefined' && (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame);\n    var isNative = !!requestFrame;\n\n    if (requestFrame && !/requestAnimationFrame\\(\\)\\s*\\{\\s*\\[native code\\]\\s*\\}/i.test(requestFrame.toString())) {\n      isNative = false;\n    }\n\n    if (isNative) {\n      return function(callback, root) {\n        requestFrame(callback, root);\n      };\n    }\n\n    var TARGET_FPS = 60;\n    var requests = {};\n    var requestCount = 0;\n    var rafHandle = 1;\n    var intervalHandle = null;\n    var lastActive = +new Date();\n\n    return function(callback, root) {\n      var callbackHandle = rafHandle++;\n      requests[callbackHandle] = callback;\n      requestCount++;\n\n      if (intervalHandle === null) {\n        intervalHandle = setInterval(function() {\n          var time = +new Date();\n          var currentRequests = requests;\n          requests = {};\n          requestCount = 0;\n\n          for(var key in currentRequests) {\n            if (currentRequests.hasOwnProperty(key)) {\n              currentRequests[key](time);\n              lastActive = time;\n            }\n          }\n\n          if (time - lastActive > 2500) {\n            clearInterval(intervalHandle);\n            intervalHandle = null;\n          }\n        }, 1000 / TARGET_FPS);\n      }\n\n      return callbackHandle;\n    };\n  })(),\n\n  stop: function(id) {\n    var cleared = running[id] != null;\n    if (cleared) {\n      running[id] = null;\n    }\n    return cleared;\n  },\n\n  isRunning: function(id) {\n    return running[id] != null;\n  },\n\n  start: function(stepCallback, verifyCallback, completedCallback, duration, easingMethod, root) {\n    var start = time();\n    var lastFrame = start;\n    var percent = 0;\n    var dropCounter = 0;\n    var id = counter++;\n\n    if (!root) {\n      root = document.body;\n    }\n\n    if (id % 20 === 0) {\n      var newRunning = {};\n      for (var usedId in running) {\n        newRunning[usedId] = true;\n      }\n      running = newRunning;\n    }\n\n    var step = function(virtual) {\n      var render = virtual !== true;\n      var now = time();\n\n      if (!running[id] || (verifyCallback && !verifyCallback(id))) {\n        running[id] = null;\n        completedCallback && completedCallback(desiredFrames - (dropCounter / ((now - start) / millisecondsPerSecond)), id, false);\n        return;\n      }\n\n      if (render) {\n        var droppedFrames = Math.round((now - lastFrame) / (millisecondsPerSecond / desiredFrames)) - 1;\n        for (var j = 0; j < Math.min(droppedFrames, 4); j++) {\n          step(true);\n          dropCounter++;\n        }\n      }\n\n      if (duration) {\n        percent = (now - start) / duration;\n        if (percent > 1) {\n          percent = 1;\n        }\n      }\n\n      var value = easingMethod ? easingMethod(percent) : percent;\n      if ((stepCallback(value, now, render) === false || percent === 1) && render) {\n        running[id] = null;\n        completedCallback && completedCallback(desiredFrames - (dropCounter / ((now - start) / millisecondsPerSecond)), id, percent === 1 || duration == null);\n      } else if (render) {\n        lastFrame = now;\n        Animate.requestAnimationFrame(step, root);\n      }\n    };\n\n    running[id] = true;\n    Animate.requestAnimationFrame(step, root);\n    return id;\n  }\n};\n\n// --- Scroller ---\n\nvar NOOP = function(){};\n\nvar easeOutCubic = function(pos) {\n  return (Math.pow((pos - 1), 3) + 1);\n};\n\nvar easeInOutCubic = function(pos) {\n  if ((pos /= 0.5) < 1) {\n    return 0.5 * Math.pow(pos, 3);\n  }\n  return 0.5 * (Math.pow((pos - 2), 3) + 2);\n};\n\nfunction Scroller(callback, options) {\n  this.__callback = callback;\n\n  this.options = {\n    scrollingX: true,\n    scrollingY: true,\n    animating: true,\n    animationDuration: 250,\n    bouncing: true,\n    locking: true,\n    paging: false,\n    snapping: false,\n    zooming: false,\n    minZoom: 0.5,\n    maxZoom: 3,\n    speedMultiplier: 1,\n    scrollingComplete: NOOP,\n    penetrationDeceleration: 0.03,\n    penetrationAcceleration: 0.08\n  };\n\n  for (var key in options) {\n    this.options[key] = options[key];\n  }\n}\n\nvar members = {\n  __isSingleTouch: false,\n  __isTracking: false,\n  __didDecelerationComplete: false,\n  __isGesturing: false,\n  __isDragging: false,\n  __isDecelerating: false,\n  __isAnimating: false,\n  __clientLeft: 0,\n  __clientTop: 0,\n  __clientWidth: 0,\n  __clientHeight: 0,\n  __contentWidth: 0,\n  __contentHeight: 0,\n  __snapWidth: 100,\n  __snapHeight: 100,\n  __refreshHeight: null,\n  __refreshActive: false,\n  __refreshActivate: null,\n  __refreshDeactivate: null,\n  __refreshStart: null,\n  __zoomLevel: 1,\n  __scrollLeft: 0,\n  __scrollTop: 0,\n  __maxScrollLeft: 0,\n  __maxScrollTop: 0,\n  __scheduledLeft: 0,\n  __scheduledTop: 0,\n  __scheduledZoom: 0,\n  __lastTouchLeft: null,\n  __lastTouchTop: null,\n  __lastTouchMove: null,\n  __positions: null,\n  __minDecelerationScrollLeft: null,\n  __minDecelerationScrollTop: null,\n  __maxDecelerationScrollLeft: null,\n  __maxDecelerationScrollTop: null,\n  __decelerationVelocityX: null,\n  __decelerationVelocityY: null,\n\n  setDimensions: function(clientWidth, clientHeight, contentWidth, contentHeight) {\n    var self = this;\n    if (clientWidth === +clientWidth) { self.__clientWidth = clientWidth; }\n    if (clientHeight === +clientHeight) { self.__clientHeight = clientHeight; }\n    if (contentWidth === +contentWidth) { self.__contentWidth = contentWidth; }\n    if (contentHeight === +contentHeight) { self.__contentHeight = contentHeight; }\n    self.__computeScrollMax();\n    self.scrollTo(self.__scrollLeft, self.__scrollTop, true);\n  },\n\n  setPosition: function(left, top) {\n    var self = this;\n    self.__clientLeft = left || 0;\n    self.__clientTop = top || 0;\n  },\n\n  setSnapSize: function(width, height) {\n    var self = this;\n    self.__snapWidth = width;\n    self.__snapHeight = height;\n  },\n\n  activatePullToRefresh: function(height, activateCallback, deactivateCallback, startCallback) {\n    var self = this;\n    self.__refreshHeight = height;\n    self.__refreshActivate = activateCallback;\n    self.__refreshDeactivate = deactivateCallback;\n    self.__refreshStart = startCallback;\n  },\n\n  finishPullToRefresh: function() {\n    var self = this;\n    self.__refreshActive = false;\n    if (self.__refreshDeactivate) { self.__refreshDeactivate(); }\n    self.scrollTo(self.__scrollLeft, self.__scrollTop, true);\n  },\n\n  getValues: function() {\n    var self = this;\n    return { left: self.__scrollLeft, top: self.__scrollTop, zoom: self.__zoomLevel };\n  },\n\n  getScrollMax: function() {\n    var self = this;\n    return { left: self.__maxScrollLeft, top: self.__maxScrollTop };\n  },\n\n  zoomTo: function(level, animate, originLeft, originTop) {\n    var self = this;\n    if (!self.options.zooming) { throw new Error(\"Zooming is not enabled!\"); }\n    if (self.__isDecelerating) { Animate.stop(self.__isDecelerating); self.__isDecelerating = false; }\n    var oldLevel = self.__zoomLevel;\n    if (originLeft == null) { originLeft = self.__clientWidth / 2; }\n    if (originTop == null) { originTop = self.__clientHeight / 2; }\n    level = Math.max(Math.min(level, self.options.maxZoom), self.options.minZoom);\n    self.__computeScrollMax(level);\n    var left = ((originLeft + self.__scrollLeft) * level / oldLevel) - originLeft;\n    var top = ((originTop + self.__scrollTop) * level / oldLevel) - originTop;\n    if (left > self.__maxScrollLeft) { left = self.__maxScrollLeft; } else if (left < 0) { left = 0; }\n    if (top > self.__maxScrollTop) { top = self.__maxScrollTop; } else if (top < 0) { top = 0; }\n    self.__publish(left, top, level, animate);\n  },\n\n  zoomBy: function(factor, animate, originLeft, originTop) {\n    var self = this;\n    self.zoomTo(self.__zoomLevel * factor, animate, originLeft, originTop);\n  },\n\n  scrollTo: function(left, top, animate, zoom) {\n    var self = this;\n    if (self.__isDecelerating) { Animate.stop(self.__isDecelerating); self.__isDecelerating = false; }\n    if (zoom != null && zoom !== self.__zoomLevel) {\n      if (!self.options.zooming) { throw new Error(\"Zooming is not enabled!\"); }\n      left *= zoom; top *= zoom;\n      self.__computeScrollMax(zoom);\n    } else {\n      zoom = self.__zoomLevel;\n    }\n    if (!self.options.scrollingX) { left = self.__scrollLeft; }\n    else {\n      if (self.options.paging) { left = Math.round(left / self.__clientWidth) * self.__clientWidth; }\n      else if (self.options.snapping) { left = Math.round(left / self.__snapWidth) * self.__snapWidth; }\n    }\n    if (!self.options.scrollingY) { top = self.__scrollTop; }\n    else {\n      if (self.options.paging) { top = Math.round(top / self.__clientHeight) * self.__clientHeight; }\n      else if (self.options.snapping) { top = Math.round(top / self.__snapHeight) * self.__snapHeight; }\n    }\n    left = Math.max(Math.min(self.__maxScrollLeft, left), 0);\n    top = Math.max(Math.min(self.__maxScrollTop, top), 0);\n    if (left === self.__scrollLeft && top === self.__scrollTop) { animate = false; }\n    self.__publish(left, top, zoom, animate);\n  },\n\n  scrollBy: function(left, top, animate) {\n    var self = this;\n    var startLeft = self.__isAnimating ? self.__scheduledLeft : self.__scrollLeft;\n    var startTop = self.__isAnimating ? self.__scheduledTop : self.__scrollTop;\n    self.scrollTo(startLeft + (left || 0), startTop + (top || 0), animate);\n  },\n\n  doMouseZoom: function(wheelDelta, timeStamp, pageX, pageY) {\n    var self = this;\n    var change = wheelDelta > 0 ? 0.97 : 1.03;\n    return self.zoomTo(self.__zoomLevel * change, false, pageX - self.__clientLeft, pageY - self.__clientTop);\n  },\n\n  doTouchStart: function(touches, timeStamp) {\n    if (touches.length == null) { throw new Error(\"Invalid touch list: \" + touches); }\n    if (timeStamp instanceof Date) { timeStamp = timeStamp.valueOf(); }\n    if (typeof timeStamp !== \"number\") { throw new Error(\"Invalid timestamp value: \" + timeStamp); }\n    var self = this;\n    self.__interruptedAnimation = true;\n    if (self.__isDecelerating) { Animate.stop(self.__isDecelerating); self.__isDecelerating = false; self.__interruptedAnimation = true; }\n    if (self.__isAnimating) { Animate.stop(self.__isAnimating); self.__isAnimating = false; self.__interruptedAnimation = true; }\n    var currentTouchLeft, currentTouchTop;\n    var isSingleTouch = touches.length === 1;\n    if (isSingleTouch) { currentTouchLeft = touches[0].pageX; currentTouchTop = touches[0].pageY; }\n    else { currentTouchLeft = Math.abs(touches[0].pageX + touches[1].pageX) / 2; currentTouchTop = Math.abs(touches[0].pageY + touches[1].pageY) / 2; }\n    self.__initialTouchLeft = currentTouchLeft;\n    self.__initialTouchTop = currentTouchTop;\n    self.__zoomLevelStart = self.__zoomLevel;\n    self.__lastTouchLeft = currentTouchLeft;\n    self.__lastTouchTop = currentTouchTop;\n    self.__lastTouchMove = timeStamp;\n    self.__lastScale = 1;\n    self.__enableScrollX = !isSingleTouch && self.options.scrollingX;\n    self.__enableScrollY = !isSingleTouch && self.options.scrollingY;\n    self.__isTracking = true;\n    self.__didDecelerationComplete = false;\n    self.__isDragging = !isSingleTouch;\n    self.__isSingleTouch = isSingleTouch;\n    self.__positions = [];\n  },\n\n  doTouchMove: function(touches, timeStamp, scale) {\n    if (touches.length == null) { throw new Error(\"Invalid touch list: \" + touches); }\n    if (timeStamp instanceof Date) { timeStamp = timeStamp.valueOf(); }\n    if (typeof timeStamp !== \"number\") { throw new Error(\"Invalid timestamp value: \" + timeStamp); }\n    var self = this;\n    if (!self.__isTracking) { return; }\n    var currentTouchLeft, currentTouchTop;\n    if (touches.length === 2) { currentTouchLeft = Math.abs(touches[0].pageX + touches[1].pageX) / 2; currentTouchTop = Math.abs(touches[0].pageY + touches[1].pageY) / 2; }\n    else { currentTouchLeft = touches[0].pageX; currentTouchTop = touches[0].pageY; }\n    var positions = self.__positions;\n    if (self.__isDragging) {\n      var moveX = currentTouchLeft - self.__lastTouchLeft;\n      var moveY = currentTouchTop - self.__lastTouchTop;\n      var scrollLeft = self.__scrollLeft;\n      var scrollTop = self.__scrollTop;\n      var level = self.__zoomLevel;\n      if (scale != null && self.options.zooming) {\n        var oldLevel = level;\n        level = level / self.__lastScale * scale;\n        level = Math.max(Math.min(level, self.options.maxZoom), self.options.minZoom);\n        if (oldLevel !== level) {\n          var currentTouchLeftRel = currentTouchLeft - self.__clientLeft;\n          var currentTouchTopRel = currentTouchTop - self.__clientTop;\n          scrollLeft = ((currentTouchLeftRel + scrollLeft) * level / oldLevel) - currentTouchLeftRel;\n          scrollTop = ((currentTouchTopRel + scrollTop) * level / oldLevel) - currentTouchTopRel;\n          self.__computeScrollMax(level);\n        }\n      }\n      if (self.__enableScrollX) {\n        scrollLeft -= moveX * this.options.speedMultiplier;\n        var maxScrollLeft = self.__maxScrollLeft;\n        if (scrollLeft > maxScrollLeft || scrollLeft < 0) {\n          if (self.options.bouncing) { scrollLeft += (moveX / 2 * this.options.speedMultiplier); }\n          else if (scrollLeft > maxScrollLeft) { scrollLeft = maxScrollLeft; }\n          else { scrollLeft = 0; }\n        }\n      }\n      if (self.__enableScrollY) {\n        scrollTop -= moveY * this.options.speedMultiplier;\n        var maxScrollTop = self.__maxScrollTop;\n        if (scrollTop > maxScrollTop || scrollTop < 0) {\n          if (self.options.bouncing) {\n            scrollTop += (moveY / 2 * this.options.speedMultiplier);\n            if (!self.__enableScrollX && self.__refreshHeight != null) {\n              if (!self.__refreshActive && scrollTop <= -self.__refreshHeight) { self.__refreshActive = true; if (self.__refreshActivate) { self.__refreshActivate(); } }\n              else if (self.__refreshActive && scrollTop > -self.__refreshHeight) { self.__refreshActive = false; if (self.__refreshDeactivate) { self.__refreshDeactivate(); } }\n            }\n          } else if (scrollTop > maxScrollTop) { scrollTop = maxScrollTop; }\n          else { scrollTop = 0; }\n        }\n      }\n      if (positions.length > 60) { positions.splice(0, 30); }\n      positions.push(scrollLeft, scrollTop, timeStamp);\n      self.__publish(scrollLeft, scrollTop, level);\n    } else {\n      var minimumTrackingForScroll = self.options.locking ? 3 : 0;\n      var minimumTrackingForDrag = 5;\n      var distanceX = Math.abs(currentTouchLeft - self.__initialTouchLeft);\n      var distanceY = Math.abs(currentTouchTop - self.__initialTouchTop);\n      self.__enableScrollX = self.options.scrollingX && distanceX >= minimumTrackingForScroll;\n      self.__enableScrollY = self.options.scrollingY && distanceY >= minimumTrackingForScroll;\n      positions.push(self.__scrollLeft, self.__scrollTop, timeStamp);\n      self.__isDragging = (self.__enableScrollX || self.__enableScrollY) && (distanceX >= minimumTrackingForDrag || distanceY >= minimumTrackingForDrag);\n      if (self.__isDragging) { self.__interruptedAnimation = false; }\n    }\n    self.__lastTouchLeft = currentTouchLeft;\n    self.__lastTouchTop = currentTouchTop;\n    self.__lastTouchMove = timeStamp;\n    self.__lastScale = scale;\n  },\n\n  doTouchEnd: function(timeStamp) {\n    if (timeStamp instanceof Date) { timeStamp = timeStamp.valueOf(); }\n    if (typeof timeStamp !== \"number\") { throw new Error(\"Invalid timestamp value: \" + timeStamp); }\n    var self = this;\n    if (!self.__isTracking) { return; }\n    self.__isTracking = false;\n    if (self.__isDragging) {\n      self.__isDragging = false;\n      if (self.__isSingleTouch && self.options.animating && (timeStamp - self.__lastTouchMove) <= 100) {\n        var positions = self.__positions;\n        var endPos = positions.length - 1;\n        var startPos = endPos;\n        for (var i = endPos; i > 0 && positions[i] > (self.__lastTouchMove - 100); i -= 3) { startPos = i; }\n        if (startPos !== endPos) {\n          var timeOffset = positions[endPos] - positions[startPos];\n          var movedLeft = self.__scrollLeft - positions[startPos - 2];\n          var movedTop = self.__scrollTop - positions[startPos - 1];\n          self.__decelerationVelocityX = movedLeft / timeOffset * (1000 / 60);\n          self.__decelerationVelocityY = movedTop / timeOffset * (1000 / 60);\n          var minVelocityToStartDeceleration = self.options.paging || self.options.snapping ? 4 : 1;\n          if (Math.abs(self.__decelerationVelocityX) > minVelocityToStartDeceleration || Math.abs(self.__decelerationVelocityY) > minVelocityToStartDeceleration) {\n            if (!self.__refreshActive) { self.__startDeceleration(timeStamp); }\n          }\n        } else { self.options.scrollingComplete(); }\n      } else if ((timeStamp - self.__lastTouchMove) > 100) { self.options.scrollingComplete(); }\n    }\n    if (!self.__isDecelerating) {\n      if (self.__refreshActive && self.__refreshStart) {\n        self.__publish(self.__scrollLeft, -self.__refreshHeight, self.__zoomLevel, true);\n        if (self.__refreshStart) { self.__refreshStart(); }\n      } else {\n        if (self.__interruptedAnimation || self.__isDragging) { self.options.scrollingComplete(); }\n        self.scrollTo(self.__scrollLeft, self.__scrollTop, true, self.__zoomLevel);\n        if (self.__refreshActive) { self.__refreshActive = false; if (self.__refreshDeactivate) { self.__refreshDeactivate(); } }\n      }\n    }\n    self.__positions.length = 0;\n  },\n\n  __publish: function(left, top, zoom, animate) {\n    var self = this;\n    var wasAnimating = self.__isAnimating;\n    if (wasAnimating) { Animate.stop(wasAnimating); self.__isAnimating = false; }\n    if (animate && self.options.animating) {\n      self.__scheduledLeft = left;\n      self.__scheduledTop = top;\n      self.__scheduledZoom = zoom;\n      var oldLeft = self.__scrollLeft;\n      var oldTop = self.__scrollTop;\n      var oldZoom = self.__zoomLevel;\n      var diffLeft = left - oldLeft;\n      var diffTop = top - oldTop;\n      var diffZoom = zoom - oldZoom;\n      var step = function(percent, now, render) {\n        if (render) {\n          self.__scrollLeft = oldLeft + (diffLeft * percent);\n          self.__scrollTop = oldTop + (diffTop * percent);\n          self.__zoomLevel = oldZoom + (diffZoom * percent);\n          if (self.__callback) { self.__callback(self.__scrollLeft, self.__scrollTop, self.__zoomLevel); }\n        }\n      };\n      var verify = function(id) { return self.__isAnimating === id; };\n      var completed = function(renderedFramesPerSecond, animationId, wasFinished) {\n        if (animationId === self.__isAnimating) { self.__isAnimating = false; }\n        if (self.__didDecelerationComplete || wasFinished) { self.options.scrollingComplete(); }\n        if (self.options.zooming) { self.__computeScrollMax(); }\n      };\n      self.__isAnimating = Animate.start(step, verify, completed, self.options.animationDuration, wasAnimating ? easeOutCubic : easeInOutCubic);\n    } else {\n      self.__scheduledLeft = self.__scrollLeft = left;\n      self.__scheduledTop = self.__scrollTop = top;\n      self.__scheduledZoom = self.__zoomLevel = zoom;\n      if (self.__callback) { self.__callback(left, top, zoom); }\n      if (self.options.zooming) { self.__computeScrollMax(); }\n    }\n  },\n\n  __computeScrollMax: function(zoomLevel) {\n    var self = this;\n    if (zoomLevel == null) { zoomLevel = self.__zoomLevel; }\n    self.__maxScrollLeft = Math.max((self.__contentWidth * zoomLevel) - self.__clientWidth, 0);\n    self.__maxScrollTop = Math.max((self.__contentHeight * zoomLevel) - self.__clientHeight, 0);\n  },\n\n  __startDeceleration: function(timeStamp) {\n    var self = this;\n    if (self.options.paging) {\n      var scrollLeft = Math.max(Math.min(self.__scrollLeft, self.__maxScrollLeft), 0);\n      var scrollTop = Math.max(Math.min(self.__scrollTop, self.__maxScrollTop), 0);\n      var clientWidth = self.__clientWidth;\n      var clientHeight = self.__clientHeight;\n      self.__minDecelerationScrollLeft = Math.floor(scrollLeft / clientWidth) * clientWidth;\n      self.__minDecelerationScrollTop = Math.floor(scrollTop / clientHeight) * clientHeight;\n      self.__maxDecelerationScrollLeft = Math.ceil(scrollLeft / clientWidth) * clientWidth;\n      self.__maxDecelerationScrollTop = Math.ceil(scrollTop / clientHeight) * clientHeight;\n    } else {\n      self.__minDecelerationScrollLeft = 0;\n      self.__minDecelerationScrollTop = 0;\n      self.__maxDecelerationScrollLeft = self.__maxScrollLeft;\n      self.__maxDecelerationScrollTop = self.__maxScrollTop;\n    }\n    var step = function(percent, now, render) { self.__stepThroughDeceleration(render); };\n    var minVelocityToKeepDecelerating = self.options.snapping ? 4 : 0.1;\n    var verify = function() {\n      var shouldContinue = Math.abs(self.__decelerationVelocityX) >= minVelocityToKeepDecelerating || Math.abs(self.__decelerationVelocityY) >= minVelocityToKeepDecelerating;\n      if (!shouldContinue) { self.__didDecelerationComplete = true; }\n      return shouldContinue;\n    };\n    var completed = function(renderedFramesPerSecond, animationId, wasFinished) {\n      self.__isDecelerating = false;\n      if (self.__didDecelerationComplete) { self.options.scrollingComplete(); }\n      self.scrollTo(self.__scrollLeft, self.__scrollTop, self.options.snapping);\n    };\n    self.__isDecelerating = Animate.start(step, verify, completed);\n  },\n\n  __stepThroughDeceleration: function(render) {\n    var self = this;\n    var scrollLeft = self.__scrollLeft + self.__decelerationVelocityX;\n    var scrollTop = self.__scrollTop + self.__decelerationVelocityY;\n    if (!self.options.bouncing) {\n      var scrollLeftFixed = Math.max(Math.min(self.__maxDecelerationScrollLeft, scrollLeft), self.__minDecelerationScrollLeft);\n      if (scrollLeftFixed !== scrollLeft) { scrollLeft = scrollLeftFixed; self.__decelerationVelocityX = 0; }\n      var scrollTopFixed = Math.max(Math.min(self.__maxDecelerationScrollTop, scrollTop), self.__minDecelerationScrollTop);\n      if (scrollTopFixed !== scrollTop) { scrollTop = scrollTopFixed; self.__decelerationVelocityY = 0; }\n    }\n    if (render) { self.__publish(scrollLeft, scrollTop, self.__zoomLevel); }\n    else { self.__scrollLeft = scrollLeft; self.__scrollTop = scrollTop; }\n    if (!self.options.paging) {\n      var frictionFactor = 0.95;\n      self.__decelerationVelocityX *= frictionFactor;\n      self.__decelerationVelocityY *= frictionFactor;\n    }\n    if (self.options.bouncing) {\n      var scrollOutsideX = 0;\n      var scrollOutsideY = 0;\n      var penetrationDeceleration = self.options.penetrationDeceleration;\n      var penetrationAcceleration = self.options.penetrationAcceleration;\n      if (scrollLeft < self.__minDecelerationScrollLeft) { scrollOutsideX = self.__minDecelerationScrollLeft - scrollLeft; }\n      else if (scrollLeft > self.__maxDecelerationScrollLeft) { scrollOutsideX = self.__maxDecelerationScrollLeft - scrollLeft; }\n      if (scrollTop < self.__minDecelerationScrollTop) { scrollOutsideY = self.__minDecelerationScrollTop - scrollTop; }\n      else if (scrollTop > self.__maxDecelerationScrollTop) { scrollOutsideY = self.__maxDecelerationScrollTop - scrollTop; }\n      if (scrollOutsideX !== 0) {\n        if (scrollOutsideX * self.__decelerationVelocityX <= 0) { self.__decelerationVelocityX += scrollOutsideX * penetrationDeceleration; }\n        else { self.__decelerationVelocityX = scrollOutsideX * penetrationAcceleration; }\n      }\n      if (scrollOutsideY !== 0) {\n        if (scrollOutsideY * self.__decelerationVelocityY <= 0) { self.__decelerationVelocityY += scrollOutsideY * penetrationDeceleration; }\n        else { self.__decelerationVelocityY = scrollOutsideY * penetrationAcceleration; }\n      }\n    }\n  }\n};\n\nfor (var key in members) {\n  Scroller.prototype[key] = members[key];\n}\n\nexport default Scroller;\nexport { Animate };\n"],"names":["time","Date","now","desiredFrames","millisecondsPerSecond","running","counter","Animate","requestAnimationFrame","requestFrame","window","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","isNative","test","toString","callback","root","TARGET_FPS","requests","rafHandle","intervalHandle","lastActive","callbackHandle","setInterval","currentRequests","key","hasOwnProperty","clearInterval","stop","id","cleared","isRunning","start","stepCallback","verifyCallback","completedCallback","duration","easingMethod","lastFrame","percent","dropCounter","document","body","newRunning","usedId","step","virtual","render","droppedFrames","Math","round","j","min","value","NOOP","easeOutCubic","pos","pow","easeInOutCubic","Scroller","options","__callback","scrollingX","scrollingY","animating","animationDuration","bouncing","locking","paging","snapping","zooming","minZoom","maxZoom","speedMultiplier","scrollingComplete","penetrationDeceleration","penetrationAcceleration","members","__isSingleTouch","__isTracking","__didDecelerationComplete","__isGesturing","__isDragging","__isDecelerating","__isAnimating","__clientLeft","__clientTop","__clientWidth","__clientHeight","__contentWidth","__contentHeight","__snapWidth","__snapHeight","__refreshHeight","__refreshActive","__refreshActivate","__refreshDeactivate","__refreshStart","__zoomLevel","__scrollLeft","__scrollTop","__maxScrollLeft","__maxScrollTop","__scheduledLeft","__scheduledTop","__scheduledZoom","__lastTouchLeft","__lastTouchTop","__lastTouchMove","__positions","__minDecelerationScrollLeft","__minDecelerationScrollTop","__maxDecelerationScrollLeft","__maxDecelerationScrollTop","__decelerationVelocityX","__decelerationVelocityY","setDimensions","clientWidth","clientHeight","contentWidth","contentHeight","self","__computeScrollMax","scrollTo","setPosition","left","top","setSnapSize","width","height","activatePullToRefresh","activateCallback","deactivateCallback","startCallback","finishPullToRefresh","getValues","zoom","getScrollMax","zoomTo","level","animate","originLeft","originTop","Error","oldLevel","max","__publish","zoomBy","factor","scrollBy","startLeft","startTop","doMouseZoom","wheelDelta","timeStamp","pageX","pageY","change","doTouchStart","touches","length","valueOf","__interruptedAnimation","currentTouchLeft","currentTouchTop","isSingleTouch","abs","__initialTouchLeft","__initialTouchTop","__zoomLevelStart","__lastScale","__enableScrollX","__enableScrollY","doTouchMove","scale","positions","moveX","moveY","scrollLeft","scrollTop","currentTouchLeftRel","currentTouchTopRel","maxScrollLeft","maxScrollTop","splice","push","minimumTrackingForScroll","minimumTrackingForDrag","distanceX","distanceY","doTouchEnd","endPos","startPos","i","timeOffset","movedLeft","movedTop","minVelocityToStartDeceleration","__startDeceleration","wasAnimating","oldLeft","oldTop","oldZoom","diffLeft","diffTop","diffZoom","verify","completed","renderedFramesPerSecond","animationId","wasFinished","zoomLevel","floor","ceil","__stepThroughDeceleration","minVelocityToKeepDecelerating","shouldContinue","scrollLeftFixed","scrollTopFixed","frictionFactor","scrollOutsideX","scrollOutsideY","prototype"],"mappings":"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"}