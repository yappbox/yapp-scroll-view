{"version":3,"file":"zynga-scroller-vertical-recognizer.js","sources":["../../src/utils/zynga-scroller-vertical-recognizer.js"],"sourcesContent":["import Hammer from 'hammerjs';\nconst FIELD_REGEXP = /input|textarea|select/i;\n\nexport default class ZyngaScrollerVerticalRecognizer extends Hammer.Pan {\n  constructor(options) {\n    super(options);\n    this.options = Object.assign({}, this.defaults, options || {});\n  }\n\n  defaults = {\n    enable: true,\n    event: 'pan',\n    threshold: 10,\n    pointers: 1,\n    direction: Hammer.DIRECTION_VERTICAL,\n  };\n\n  recognize(inputData) {\n    let isOverElementThatPreventsScrollingInteraction =\n      this.shouldPreventScrollingInteraction(inputData);\n    // We want to be sure to delegate to the scroll component if this is a mousedown or touchstart.\n    // There are circumstances where this.canEmit() will return false because a \"requireFail\"'d recognizer\n    // has not yet reset.\n    if (\n      (inputData.isFirst || this.canEmit()) &&\n      !isOverElementThatPreventsScrollingInteraction\n    ) {\n      this.delegateToScrollComponent(inputData);\n    }\n    if (isOverElementThatPreventsScrollingInteraction) {\n      this.state = Hammer.STATE_FAILED;\n      return;\n    }\n    super.recognize(inputData);\n    if (inputData.isFinal) {\n      setTimeout(() => {\n        this.state = Hammer.STATE_POSSIBLE;\n      }, 0);\n    }\n  }\n\n  shouldPreventScrollingInteraction(inputData) {\n    let { target } = inputData;\n    return (\n      inputData.isFirst &&\n      ((target && target.tagName.match(FIELD_REGEXP)) ||\n        (target && target.hasAttribute('data-prevent-scrolling')))\n    );\n  }\n\n  delegateToScrollComponent(inputData) {\n    if (inputData.isFirst) {\n      this.options.scrollComponent.doTouchStart(\n        inputData.pointers,\n        inputData.timeStamp,\n      );\n    } else if (inputData.isFinal) {\n      this.options.scrollComponent.doTouchEnd(\n        inputData.pointers,\n        inputData.timeStamp,\n        inputData.srcEvent,\n      );\n    } else {\n      this.options.scrollComponent.doTouchMove(\n        inputData.pointers,\n        inputData.timeStamp,\n        inputData.scale,\n      );\n    }\n  }\n}\n"],"names":["FIELD_REGEXP","ZyngaScrollerVerticalRecognizer","Hammer","Pan","constructor","options","Object","assign","defaults","enable","event","threshold","pointers","direction","DIRECTION_VERTICAL","recognize","inputData","isOverElementThatPreventsScrollingInteraction","shouldPreventScrollingInteraction","isFirst","canEmit","delegateToScrollComponent","state","STATE_FAILED","isFinal","setTimeout","STATE_POSSIBLE","target","tagName","match","hasAttribute","scrollComponent","doTouchStart","timeStamp","doTouchEnd","srcEvent","doTouchMove","scale"],"mappings":";;AACA,MAAMA,YAAY,GAAG,wBAAwB;AAE9B,MAAMC,+BAA+B,SAASC,MAAM,CAACC,GAAG,CAAC;EACtEC,WAAWA,CAACC,OAAO,EAAE;IACnB,KAAK,CAACA,OAAO,CAAC;AACd,IAAA,IAAI,CAACA,OAAO,GAAGC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE,IAAI,CAACC,QAAQ,EAAEH,OAAO,IAAI,EAAE,CAAC;AAChE,EAAA;AAEAG,EAAAA,QAAQ,GAAG;AACTC,IAAAA,MAAM,EAAE,IAAI;AACZC,IAAAA,KAAK,EAAE,KAAK;AACZC,IAAAA,SAAS,EAAE,EAAE;AACbC,IAAAA,QAAQ,EAAE,CAAC;IACXC,SAAS,EAAEX,MAAM,CAACY;GACnB;EAEDC,SAASA,CAACC,SAAS,EAAE;AACnB,IAAA,IAAIC,6CAA6C,GAC/C,IAAI,CAACC,iCAAiC,CAACF,SAAS,CAAC;AACnD;AACA;AACA;AACA,IAAA,IACE,CAACA,SAAS,CAACG,OAAO,IAAI,IAAI,CAACC,OAAO,EAAE,KACpC,CAACH,6CAA6C,EAC9C;AACA,MAAA,IAAI,CAACI,yBAAyB,CAACL,SAAS,CAAC;AAC3C,IAAA;AACA,IAAA,IAAIC,6CAA6C,EAAE;AACjD,MAAA,IAAI,CAACK,KAAK,GAAGpB,MAAM,CAACqB,YAAY;AAChC,MAAA;AACF,IAAA;AACA,IAAA,KAAK,CAACR,SAAS,CAACC,SAAS,CAAC;IAC1B,IAAIA,SAAS,CAACQ,OAAO,EAAE;AACrBC,MAAAA,UAAU,CAAC,MAAM;AACf,QAAA,IAAI,CAACH,KAAK,GAAGpB,MAAM,CAACwB,cAAc;MACpC,CAAC,EAAE,CAAC,CAAC;AACP,IAAA;AACF,EAAA;EAEAR,iCAAiCA,CAACF,SAAS,EAAE;IAC3C,IAAI;AAAEW,MAAAA;AAAO,KAAC,GAAGX,SAAS;IAC1B,OACEA,SAAS,CAACG,OAAO,KACfQ,MAAM,IAAIA,MAAM,CAACC,OAAO,CAACC,KAAK,CAAC7B,YAAY,CAAC,IAC3C2B,MAAM,IAAIA,MAAM,CAACG,YAAY,CAAC,wBAAwB,CAAE,CAAC;AAEhE,EAAA;EAEAT,yBAAyBA,CAACL,SAAS,EAAE;IACnC,IAAIA,SAAS,CAACG,OAAO,EAAE;AACrB,MAAA,IAAI,CAACd,OAAO,CAAC0B,eAAe,CAACC,YAAY,CACvChB,SAAS,CAACJ,QAAQ,EAClBI,SAAS,CAACiB,SACZ,CAAC;AACH,IAAA,CAAC,MAAM,IAAIjB,SAAS,CAACQ,OAAO,EAAE;AAC5B,MAAA,IAAI,CAACnB,OAAO,CAAC0B,eAAe,CAACG,UAAU,CACrClB,SAAS,CAACJ,QAAQ,EAClBI,SAAS,CAACiB,SAAS,EACnBjB,SAAS,CAACmB,QACZ,CAAC;AACH,IAAA,CAAC,MAAM;AACL,MAAA,IAAI,CAAC9B,OAAO,CAAC0B,eAAe,CAACK,WAAW,CACtCpB,SAAS,CAACJ,QAAQ,EAClBI,SAAS,CAACiB,SAAS,EACnBjB,SAAS,CAACqB,KACZ,CAAC;AACH,IAAA;AACF,EAAA;AACF;;;;"}